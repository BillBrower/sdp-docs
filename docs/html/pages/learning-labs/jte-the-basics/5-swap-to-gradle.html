

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Swap Libraries &mdash; Solutions Delivery Platform  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Apply to a GitHub Repository" href="6-multibranch.html" />
    <link rel="prev" title="Configure the Pipeline" href="4-first-configuration-file.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Solutions Delivery Platform
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://jenkinsci.github.io/templating-engine-plugin">Jenkins Templating Engine</a></li>
<li class="toctree-l1"><a class="reference external" href="https://boozallen.github.io/sdp-libraries">Pipeline Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deployment-guides/openshift/index.html">OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Learning Labs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../try-it-out/docs/index.html">Try It Out</a></li>
<li class="toctree-l1"><a class="reference internal" href="../local-development/index.html">Local Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">JTE: The Basics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-pipeline-job.html">Write the Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-first-libraries.html">Create the Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-first-configuration-file.html">Configure the Pipeline</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Swap Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-multibranch.html">Apply to a GitHub Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="7-github-org.html">Apply to Multiple GitHub Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-summary.html">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jte-primitives/index.html">JTE: Pipeline Primitives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jte-advanced-features/index.html">JTE: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/helm-multitenancy.html">Helm Multitenancy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/add_jenkins_credentials.html">Add Credentials to Jenkins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://help.github.com/articles/creating-a-new-organization-from-scratch/">Create a GitHub Organization</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.twistlock.com/2018/05/08/securing-containers-red-hat-openshift-twistlock-deployment-script/">Deploy Twistlock to OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribute-to-docs.html">Contribute to this Documentation!</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Solutions Delivery Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">JTE: The Basics</a> &raquo;</li>
        
      <li>Swap Libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/pages/learning-labs/jte-the-basics/5-swap-to-gradle.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="swap-libraries">
<span id="jte-the-basics-swap-libraries"></span><h1>Swap Libraries<a class="headerlink" href="#swap-libraries" title="Permalink to this headline">¶</a></h1>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>The purpose of the Jenkins Templating Engine is three fold:</p>
<ol class="arabic simple">
<li><strong>Optimizing pipeline code reuse</strong></li>
</ol>
<p>Now organizations can coalesce around a portfolio of centralized,
reusable pipeline libraries representing different tool integrations
for their CI/CD pipelines.</p>
<ol class="arabic simple" start="2">
<li><strong>Simplify pipeline maintainability</strong></li>
</ol>
<p>Separating a pipeline into a templates, configuration file, and
pipeline libraries can also be thought of as separating the
<strong>business logic</strong> of your pipeline from the <strong>technical implementation</strong>.
In our experience, it is significantly easier to manage a template backed
by modularized pipeline libraries than it is to manage application-specific
Jenkinsfiles.</p>
<ol class="arabic simple" start="3">
<li><strong>Organizational Governance</strong></li>
</ol>
<p class="last">With the traditional Jenkinsfile defined within, and duplicated across, source
code repositories it can be very challenging to ensure the same process is
being followed by disparate application development teams and confirm that
organizational policies around code quality and security are being met.  JTE
brings a level of governance to your pipelines by centralizing the definition
of the pipeline workflow to a common place.</p>
</div>
<p>To demonstrate the reusability of pipeline templates, what would happen if
the development team switched to using Gradle?</p>
<p>All we would have to do is create a <code class="docutils literal notranslate"><span class="pre">gradle</span></code> library that implements the
<code class="docutils literal notranslate"><span class="pre">build()</span></code> step of the pipeline template.</p>
<div class="section" id="create-the-gradle-library">
<h2>Create the Gradle Library<a class="headerlink" href="#create-the-gradle-library" title="Permalink to this headline">¶</a></h2>
<p>Remember that a library is just a subdirectory within the <code class="docutils literal notranslate"><span class="pre">Base</span> <span class="pre">Directory</span></code> configured
as part of the Library Source in Jenkins.  So to create the <code class="docutils literal notranslate"><span class="pre">gradle</span></code> library we should
create a <code class="docutils literal notranslate"><span class="pre">gradle</span></code> directory under the <code class="docutils literal notranslate"><span class="pre">libraries</span></code> directory.</p>
<p>Then, to implement the <code class="docutils literal notranslate"><span class="pre">build()</span></code> step for the pipeline, create a <code class="docutils literal notranslate"><span class="pre">build.groovy</span></code> file
within the newly created <code class="docutils literal notranslate"><span class="pre">gradle</span></code> subdirectory.</p>
<p>When you have created the new <code class="docutils literal notranslate"><span class="pre">gradle</span></code> directory and <code class="docutils literal notranslate"><span class="pre">build.groovy</span></code> file, your repository
file structure will now be:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── libraries
    ├── gradle
    │   └── build.groovy
    ├── maven
    │   └── build.groovy
    └── sonarqube
        └── static_code_analysis.groovy
</pre></div>
</div>
<p>The contents of the <code class="docutils literal notranslate"><span class="pre">build.groovy</span></code> should be:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">call</span><span class="p">(){</span>
    <span class="n">stage</span><span class="p">(</span><span class="s2">&quot;Gradle: Build&quot;</span><span class="p">){</span>
        <span class="n">println</span> <span class="s2">&quot;build from the gradle library&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you added this library on your local computer instead of through
the GitHub UI, then please make sure you’ve pushed this change to the
master branch of the repository.</p>
</div>
</div>
<div class="section" id="swap-from-maven-to-gradle">
<h2>Swap from Maven to Gradle<a class="headerlink" href="#swap-from-maven-to-gradle" title="Permalink to this headline">¶</a></h2>
<p>Now that we have a swappable implementation for the <code class="docutils literal notranslate"><span class="pre">build()</span></code> step
of the pipeline template, switching from Maven to Gradle is as easy as
changing the pipeline configuration.</p>
<p>Going back to the job configuration, in the <code class="docutils literal notranslate"><span class="pre">Pipeline</span> <span class="pre">Configuration</span></code>
text box, swap the <code class="docutils literal notranslate"><span class="pre">maven</span></code> line to <code class="docutils literal notranslate"><span class="pre">gradle</span></code> and click <code class="docutils literal notranslate"><span class="pre">Save</span></code>.</p>
<p>The pipeline configuration should now be:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="p">{</span>
    <span class="n">gradle</span>
    <span class="n">sonarqube</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="run-the-pipeline">
<h2>Run the Pipeline<a class="headerlink" href="#run-the-pipeline" title="Permalink to this headline">¶</a></h2>
<p>Follow the same steps as before to run the job again and
checkout the build logs:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Started by user admin
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[JTE] Pipeline Configuration Modifications (show)
[JTE] Loading Library gradle (show)
[JTE] Library gradle does not have a configuration file.
[JTE] Loading Library sonarqube (show)
[JTE] Library sonarqube does not have a configuration file.
[JTE] Obtained Pipeline Template from job configuration
[Pipeline] node
Running on Jenkins in /var/jenkins_home/workspace/single-job
[Pipeline] {
[Pipeline] writeFile
[Pipeline] archiveArtifacts
Archiving artifacts
[Pipeline] }
[Pipeline] // node
[JTE] [Step - gradle/build.call()]
[Pipeline] stage
[Pipeline] { (Gradle: Build)
[Pipeline] echo
build from the gradle library
[Pipeline] }
[Pipeline] // stage
[JTE] [Step - sonarqube/static_code_analysis.call()]
[Pipeline] stage
[Pipeline] { (SonarQube: Static Code Analysis)
[Pipeline] echo
static code analysis from the sonarqube library
[Pipeline] }
[Pipeline] // stage
[Pipeline] End of Pipeline
Finished: SUCCESS
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="6-multibranch.html" class="btn btn-neutral float-right" title="Apply to a GitHub Repository" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="4-first-configuration-file.html" class="btn btn-neutral float-left" title="Configure the Pipeline" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-144247959-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>