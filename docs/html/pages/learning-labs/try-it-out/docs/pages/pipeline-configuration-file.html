

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Understanding the Pipeline Configuration File &mdash; Solutions Delivery Platform  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Understanding the Jenkinsfile" href="jenkinsfile.html" />
    <link rel="prev" title="SDP Overview" href="sdp-overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Solutions Delivery Platform
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://jenkinsci.github.io/templating-engine-plugin">Jenkins Templating Engine</a></li>
<li class="toctree-l1"><a class="reference external" href="https://boozallen.github.io/sdp-libraries">Pipeline Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../deployment-guides/openshift/index.html">OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Learning Labs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Try It Out</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="environment-preparation.html">Environment Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdp-overview.html">SDP Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Understanding the Pipeline Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="jenkinsfile.html">Understanding the Jenkinsfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-github-credentials.html">Create Jenkins Credentials for GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="run-jenkins-build.html">Run the Jenkins Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../local-development/index.html">Local Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jte-the-basics/index.html">JTE: The Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jte-primitives/index.html">JTE: Pipeline Primitives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jte-advanced-features/index.html">JTE: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to/helm-multitenancy.html">Helm Multitenancy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to/add_jenkins_credentials.html">Add Credentials to Jenkins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://help.github.com/articles/creating-a-new-organization-from-scratch/">Create a GitHub Organization</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.twistlock.com/2018/05/08/securing-containers-red-hat-openshift-twistlock-deployment-script/">Deploy Twistlock to OpenShift</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Solutions Delivery Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Try It Out</a> &raquo;</li>
        
      <li>Understanding the Pipeline Configuration File</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/pages/learning-labs/try-it-out/docs/pages/pipeline-configuration-file.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="understanding-the-pipeline-configuration-file">
<span id="id1"></span><h1>Understanding the Pipeline Configuration File<a class="headerlink" href="#understanding-the-pipeline-configuration-file" title="Permalink to this headline">¶</a></h1>
<p>In this step, we will be going over the pipeline configuration file that has already been created and placed within the <a class="reference external" href="https://github.com/boozallen/sdp-labs-sample-app">sample application
GitHub Repository</a>.</p>
<p>The <a class="reference external" href="https://github.com/boozallen/sdp-labs-sample-app/blob/master/pipeline_config.groovy">pipeline_config.groovy</a> file is a file where organization or project-wide settings can be configured for your DevSecOps pipelines.
It contains the organization-wide libraries you’d like to utilize within SDP, the application environments, your pipeline templates, and more.</p>
<p>For this lab, the <a class="reference external" href="https://github.com/boozallen/sdp-labs-sample-app/blob/master/pipeline_config.groovy">pipeline_config.groovy</a> file will be able to perform static quality analysis using SonarQube
and build a Docker image if the given code reaches a certain code quality based on the analysis.</p>
<p>While this example of a pipeline configuration only uses two software tools (Docker and SonarQube),
there are many other tools already integrated with SDP. For more information about the libraries that have already been
integrated with SDP, visit the section about <a class="reference external" href="https://boozallen.github.io/sdp-docs/pages/libraries/index.html">SDP libraries</a>.</p>
<p>The rest of this page will now focus on explaining the different parts of our sample <a class="reference external" href="https://github.com/boozallen/sdp-labs-sample-app/blob/master/pipeline_config.groovy">pipeline_config.groovy</a> file with the content of the file shown below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>libraries<span class="o">{</span>
  sdp<span class="o">{</span>
    images<span class="o">{</span>
      <span class="nv">registry</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:5000&quot;</span> // registry url
      <span class="nv">cred</span> <span class="o">=</span> <span class="s2">&quot;sdp-docker-registry&quot;</span>// jenkins cred id to authenticate
      <span class="nv">docker_args</span> <span class="o">=</span> <span class="s2">&quot;--network=try-it-out_sdp&quot;</span>  // docker runtime args
    <span class="o">}</span>
  <span class="o">}</span>
  github_enterprise
  sonarqube<span class="o">{</span>
    <span class="nv">enforce_quality_gate</span> <span class="o">=</span> <span class="nb">true</span>
  <span class="o">}</span>
  docker<span class="o">{</span>
    <span class="nv">registry</span> <span class="o">=</span> <span class="s2">&quot;localhost:5000&quot;</span>
    <span class="nv">cred</span> <span class="o">=</span> <span class="s2">&quot;sdp-docker-registry&quot;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="general-libraries">
<h2>General Libraries<a class="headerlink" href="#general-libraries" title="Permalink to this headline">¶</a></h2>
<p>On the top-most level, there is the <code class="docutils literal notranslate"><span class="pre">libraries</span></code> section. This is where you need to list out all the libraries that you’d like to utilize
within your Jenkins pipelines and any other libraries they may depend on.</p>
<p>In the pipeline_config.groovy file above, there are four different libraries: <a class="reference external" href="https://boozallen.github.io/sdp-docs/pages/libraries/sdp/README.html">sdp</a>, <a class="reference external" href="https://boozallen.github.io/sdp-docs/pages/libraries/github_enterprise/README.html">github_enterprise</a>, <a class="reference external" href="https://boozallen.github.io/sdp-docs/pages/libraries/sonarqube/README.html">sonarqube</a>, and <a class="reference external" href="https://boozallen.github.io/sdp-docs/pages/libraries/docker/README.html">docker</a>.</p>
<p>Inside each individual library, there may be a section within some curly braces of some configurable parameters. We will be going into a more
in-depth explanation for each library in the next few sections. As the <code class="docutils literal notranslate"><span class="pre">github_enterprise</span></code> library didn’t have any parameters within it, we
will be skipping over an explanation for that library. You just need to know that it is how your Jenkins instance is able to interact with
(in this case, the public version of) GitHub.</p>
</div>
<div class="section" id="sdp-library">
<h2>SDP Library<a class="headerlink" href="#sdp-library" title="Permalink to this headline">¶</a></h2>
<p>The images section within the SDP library contains four parameters that were configurable. They resolve around the storage of Docker
images created and relating to SDP.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">registry</span></code> value specifies the URL of the Docker registry for where SDP Docker images will be pulled from whereas the value for <code class="docutils literal notranslate"><span class="pre">cred</span></code> specifies the ID
of the Jenkins credential that Jenkins will be using to access that Docker registry. In this case, the local Docker registry (accessible at localhost:5000) we deployed
earlier is where we will be pulling and pushing our SDP Docker images to.</p>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">docker_args</span></code> parameter forces all the SDP-related Docker images to be run with any given Docker flag, as the
<code class="docutils literal notranslate"><span class="pre">&quot;--network=try-it-out_sdp&quot;</span></code> value specifies that the SDP docker images should all be placed inside a <a class="reference external" href="https://docs.docker.com/v17.09/engine/userguide/networking/#user-defined-networks">Docker network</a> called
<code class="docutils literal notranslate"><span class="pre">try-it-out_sdp</span></code>.</p>
</div>
<div class="section" id="sonarqube-library">
<h2>SonarQube Library<a class="headerlink" href="#sonarqube-library" title="Permalink to this headline">¶</a></h2>
<p>In the SonarQube library, the <code class="docutils literal notranslate"><span class="pre">enforce_quality_gate</span></code> boolean variable is set to true so that the Jenkins build will fail if the code
does not pass the <a class="reference external" href="https://docs.sonarqube.org/latest/user-guide/quality-gates/">quality gate</a>, or some general code quality percentage, which is configurable in SonarQube itself.</p>
</div>
<div class="section" id="docker-library">
<h2>Docker Library<a class="headerlink" href="#docker-library" title="Permalink to this headline">¶</a></h2>
<p>For the Docker library, there are only two configurable parameters: the registry and the cred values.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">registry</span></code> parameter is to specify the URL of the Docker registry where Docker images for the different
applications will be pushed to or where users can retrieve them from.</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">cred</span></code> parameter is the ID of the Jenkins credential Jenkins uses to be able to access the local Docker registry.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The value of the <code class="docutils literal notranslate"><span class="pre">localhost:5000</span></code> URL does not contain <code class="docutils literal notranslate"><span class="pre">http://</span></code> on purpose, as the URL value is what is used for the Docker tag,
whose syntax does not allow for <code class="docutils literal notranslate"><span class="pre">http://</span></code> to be in there.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="jenkinsfile.html" class="btn btn-neutral float-right" title="Understanding the Jenkinsfile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sdp-overview.html" class="btn btn-neutral float-left" title="SDP Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-144247959-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>