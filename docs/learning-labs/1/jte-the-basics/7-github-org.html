<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Apply to Multiple GitHub Repositories :: Solutions Delivery Platform</title>
    <link rel="canonical" href="http://localhost/learning-labs/1/jte-the-basics/7-github-org.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../_/css/site.css">    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Fira+Code">

    <link rel="stylesheet"href="https:////cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/monokai-sublime.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/asciidoc.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/groovy.min.js"></script>
    <script src="https://unpkg.com/popper.js@1"></script>
    <script src="https://unpkg.com/tippy.js@5"></script>
    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>  </head>
  <body class="article">
    <header class="mdc-top-app-bar mdc-top-app-bar--fixed">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
      <img class="toolbar-logo" src="../../../_/img/jte.svg" viewBox="20 0 80 100" alt="Jenkins Templating Engine Logo">
      <span class="mdc-top-app-bar__title">Solutions Delivery Platform</span>
    </section>

    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
        <i class="material-icons mdc-icon-button search" tabindex="0" role="button">search</i>
    </section>
  </div>

  <div class="mdc-top-app-bar__row sdp-top-app-bar__search mdc-drawer-app-content hide">
    <section class="mdc-top-app-bar__section">
      <i class="material-icons mdc-icon-button search-arrow-back" tabindex="0" role="button" title="Close search">arrow_back</i>

      <div class="mdc-text-field search expanded">
        <input type="text" id="search-input" class="mdc-text-field__input search">
        <label class="mdc-floating-label mdc-floating-label--float-above" for="search-input">
          Search the docs
        </label>
      </div>

      <i class="material-icons mdc-icon-button search-clear-query" role="button" tabindex="0" title="Clear search">close</i>
    </section>
  </div>
</header>
    <div class="body">
<div class="toolbar mobileOnly" role="navigation">
  <button id="toolbar-nav-toggle" class="mdc-icon-button material-icons mdc-icon-button">menu</button>
  <a href="../../../overview/1/index.html" class="home-link"></a>
<span class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Learning Labs</a></li>
    <li><a href="index.html">JTE: The Basics</a></li>
    <li><a href="7-github-org.html">Apply to Multiple Github Repositories</a></li>
  </ul>
</span>
</div>
<div class="nav-container"  data-component="learning-labs" data-version="1">
  <aside class="nav-container">
    <div class="panels">
          <div class="nav-trees">
      <div class="version-box">
        <select data-component="learning-labs" class="select-version">
            <option value="1">
              1
            </option>
        </select>
      </div>
        <div data-component="learning-labs" data-version="1" class="">
          <div class="nav-item">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../index.html">
              Learning Labs
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../index.html">Overview</a>              </div>
           
     
       
   
     
      <div class="nav-item">
        <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
          
            <a  class="" href="../local-development/index.html">Local Development</a>              </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../local-development/1-prerequisites.html">Prerequisites</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../local-development/2-run-jenkins.html">Run the Jenkins Containers</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../local-development/3-configure-jenkins.html">Configuring Jenkins</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../local-development/4-validate-jenkins.html">Validate Jenkins</a>              </div>
                  </div>
     
     
       
   
     
      <div class="nav-item">
        <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
          
            <a  class="" href="index.html">JTE: The Basics</a>              </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="1-prerequisites.html">Prerequisites</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="2-pipeline-job.html">Write the Template</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="3-first-libraries.html">Create the Libraries</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="4-first-configuration-file.html">Configure the Pipeline</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="5-swap-to-gradle.html">Swap Libraries</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="6-multibranch.html">Apply to a GitHub Repository</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer is-current-page" href="7-github-org.html">Apply to Multiple Github Repositories</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="8-summary.html">Summary</a>              </div>
                  </div>
     
     
       
   
     
      <div class="nav-item">
        <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
          
            <a  class="" href="../jte-primitives/index.html">JTE: Pipeline Primitives</a>              </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/1-prerequisites.html">Prerequisites</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/2-pipeline-job.html">Create a Pipeline Job</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/3-stages.html">Stages</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/4-application-environments.html">Application Environments</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/5-keywords.html">Keywords</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-primitives/6-summary.html">Summary</a>              </div>
                  </div>
     
     
       
   
     
      <div class="nav-item">
        <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
          
            <a  class="" href="../jte-advanced-features/index.html">JTE: Advanced Features</a>              </div>
       
        <div class="nav-children-panel hide">
           
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-advanced-features/1-prerequisites.html">Prerequisites</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-advanced-features/2-default-step-implementation.html">Default Step Implementation</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-advanced-features/3-pipeline-lifecycle-hooks.html">Pipeline Lifecycle Hooks</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-advanced-features/4-multimethod-steps.html">Multi-Method Steps</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../jte-advanced-features/5-summary.html">Summary</a>              </div>
                  </div>
              </div>
        </div>
    </div>      
    <div class="clear"></div>
    <div class="nav-trees">
      <div class="version-box">
        <select data-component="overview" class="select-version">
            <option value="1">
              1
            </option>
        </select>
      </div>
        <div data-component="overview" data-version="1" class="">
          <div class="nav-item">
              <i class="material-icons show-more" aria-hidden="true">chevron_right</i>
            <a  class="" href="../../../overview/1/index.html">
              Overview
            </a>
          </div>
          <div class="nav-children-panel hide">
             
   
     
       
   
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../../../overview/1/index.html">Welcome</a>              </div>
           
     
      <div class="nav-item">
        
          
            <a  class="spacer" href="../../../overview/1/contribute-to-docs.html">Contribute to this Documentation</a>              </div>
                    </div>
        </div>
    </div>      
    <div class="clear"></div>

    </div>
  </aside>
</div>
<main>
<article class="doc">
        <div class="on-this-page-container desktopOnly">
    <aside>
        <div class="toc-header">
            <span class="toc-title">On this page</span>
            <a class="edit-page" href="file:///Users/steventerrana/Code/sdp/repos/sdp-docs/learning-labs/modules/jte-the-basics/pages/7-github-org.adoc">
                <div class="mdc-ripple-surface edit-page">
                    <div class="mdc-button__ripple"></div>
                    <i class="material-icons-outlined mdc-button__icon" aria-hidden="true">edit</i>
                    <span class="mdc-button__label">Edit on GitHub</span>
                </div>
            </a>
        </div>
        <ul id="toc" class="toc">            

        </ul>
    </aside>
</div>

        <div class="contents">
                <h1 class="page">Apply to Multiple GitHub Repositories</h1>
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Next up, we&#8217;ll see how to apply the same template to two different
applications that are using different tools.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s walk through how you would setup JTE to this situation where one
application is using maven, the other application is using gradle, and
both applications are using SonarQube.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_new_github_repository"><a class="anchor" href="#_create_a_new_github_repository"></a>Create a New GitHub Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We already have a pipeline configuration repository that has our
pipeline template, pipeline configuration file, and pipeline libraries
as well as a repository that represents an application using gradle.</p>
</div>
<div class="paragraph">
<p>Follow the same procedure as before when creating the gradle
application&#8217;s repository to create a maven application repository named
<code>jte-the-basics-app-maven</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modify_the_pipeline_configurations"><a class="anchor" href="#_modify_the_pipeline_configurations"></a>Modify the Pipeline Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that there are multiple applications with some configurations that
are common and some configurations that are unique, we need to introduce
the concept of pipeline configuration aggregation.</p>
</div>
<div class="sect2">
<h3 id="_modify_the_governance_tier_configuration_file"><a class="anchor" href="#_modify_the_governance_tier_configuration_file"></a>Modify the Governance Tier Configuration File</h3>
<div class="paragraph">
<p>We need to edit the pipeline configuration file
(<code>pipeline_config.groovy</code>) we created earlier to represent the <strong>common</strong>
configurations that will be applied to both apps and explicitly <em>allow</em>
these applications to add their own configurations.</p>
</div>
<div class="paragraph">
<p><strong>pipeline-configuration/pipeline_config.groovy</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">libraries{
    merge = true
    sonarqube
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this configuration, both applications are using SonarQube. Since this
is a common configuration, we&#8217;ll leave it in the Governance Tier&#8217;s
configuration file.</p>
</div>
<div class="paragraph">
<p>The application repositories will each get their own
<code>pipeline_config.groovy</code> to indicate if they are using the <code>maven</code> or
the <code>gradle</code> library.</p>
</div>
<div class="paragraph">
<p>Since we want to allow these apps to add <em>additional</em> configurations, we
need to be explicit about that by setting <code>merge = true</code> in the
<code>libraries</code> block of the pipeline configuration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When aggregating pipeline configurations, JTE applies <em>conditional
inheritance</em> during the aggregation process. To learn more on
conditional inheritance,
<a href="https://jenkinsci.github.io/templating-engine-plugin/pages/Governance/config_file_aggregation.html">read
the docs</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_pipeline_configuration_file_for_the_maven_application"><a class="anchor" href="#_create_a_pipeline_configuration_file_for_the_maven_application"></a>Create a Pipeline Configuration File for the Maven Application</h3>
<div class="paragraph">
<p>In the <code>jte-the-basics-app-maven</code> repository we just created, add a
<code>pipeline_config.groovy</code> file at the root that specifies you want to
load the <code>maven</code> library.</p>
</div>
<div class="paragraph">
<p><strong>pipeline_config.groovy</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">libraries{
    maven
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since this application will inherit the global configurations defined in
the Governance Tier, we don&#8217;t have to duplicate the configuration of
loading the sonarqube library in the repo level pipeline configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_pipeline_configuration_file_for_the_gradle_application"><a class="anchor" href="#_create_a_pipeline_configuration_file_for_the_gradle_application"></a>Create a Pipeline Configuration File for the Gradle Application</h3>
<div class="paragraph">
<p>In the <code>jte-the-basics-app-gradle</code> repository we created earlier for the
Multibranch Project, add a <code>pipeline_config.groovy</code> file at the root
that specifies you want to load the <code>gradle</code> library.</p>
</div>
<div class="paragraph">
<p><strong>pipeline_config.groovy</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">libraries{
    gradle
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_github_organization_project"><a class="anchor" href="#_create_a_github_organization_project"></a>Create a GitHub Organization Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We created a <code>Multibranch Project</code> that automatically created jobs for
every branch and Pull Request in a repository.</p>
</div>
<div class="paragraph">
<p>Now, we&#8217;ll create a <code>GitHub Organization Project</code> that can automatically
create <code>Multibranch Projects</code> for every repository within a GitHub
Organization.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the Jenkins home page, select <code>New Item</code> in the lefthand
navigation menu</p>
</li>
<li>
<p>Select a name for the job.</p>
</li>
<li>
<p>Select <code>GitHub Organization</code> the click <code>OK</code> at the bottom of the
screen</p>
</li>
<li>
<p>Select the GitHub credential under the <code>Credentials</code> drop down menu</p>
</li>
<li>
<p>Enter your GitHub username under the <code>Owner</code> field</p>
</li>
<li>
<p>Under <code>Behaviors</code> click <code>Add</code> then under <code>Repositories</code> (not to be
confused with <code>Within Repositories</code>), select
<code>Filter by name (with wildcards)</code></p>
</li>
<li>
<p>Enter <code>jte-the-basics-app-*</code> in the <code>Include</code> text box (assuming
you&#8217;ve following the naming recommendations of the application
repositories)</p>
</li>
<li>
<p>Under <code>Project Recognizers</code> hit the red X to delete the
<code>Pipeline Jenkinsfile</code> Recognizers</p>
</li>
<li>
<p>Under <code>Project Recognizers</code> select <code>Add</code> and click
<code>Jenkins Templating Engine</code></p>
</li>
<li>
<p>Click <code>Save</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After creating the GitHub Organization job in Jenkins, you will be
redirected to the logs of the GitHub Organization being scanned to find
repositories that match the wildcard format entered during job creation.
This will scope the repositories for which jobs are created to just this
lab&#8217;s application repositories.</p>
</div>
<div class="paragraph">
<p>Once scanning has finished, go view the GitHub Orgnization&#8217;s job page in
Jenkins and you will see two Multibranch Projects have been created for
<code>example-jte-app-gradle</code> and <code>example-jte-app-maven</code>.</p>
</div>
<div class="paragraph">
<p>Explore each of these jobs to see that the <code>gradle</code> repository&#8217;s
pipeline loaded the <code>gradle</code> library and the <code>maven</code> repository loaded
the <code>maven</code> library and both pipelines loaded the <code>sonarqube</code> library.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/github_org.gif" alt="image"></span></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We just created a configuration where <strong>multiple</strong> applications used the
<strong>same</strong> pipeline template, shared a common configuration, but still have
the flexibility to choose the correct build tool for their application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
        </div>
</article>
<div class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</div>
</main>
</div>
    <script src="../../../_/js/site.js"></script>
<script async src="../../../_/../search-index.js"></script>  </body>
</html>
